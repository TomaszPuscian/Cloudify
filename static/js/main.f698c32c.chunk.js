(this.webpackJsonpcloudify=this.webpackJsonpcloudify||[]).push([[0],{23:function(e,t,a){e.exports=a(44)},28:function(e,t,a){},29:function(e,t,a){},30:function(e,t,a){},31:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},44:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(20),o=a.n(c),i=(a(28),a(29),a(30),a(22)),l=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",null,r.a.createElement("span",{className:"img--header"}),r.a.createElement("div",{className:"header--container"},r.a.createElement("h1",{className:"logo"},"CLOUDIFY"),r.a.createElement("h3",{id:"sub-logo"},"Find best music for your current weather")),r.a.createElement(i.a,{variant:"success",className:"connect-user--button"},"Connect with your account")))},u=function(e){return r.a.createElement(r.a.Fragment,null,e.children)},s=(a(31),function(){return r.a.createElement("footer",null,r.a.createElement("div",{className:"footer--container"},r.a.createElement("p",{className:"footer--paragraph"},"Copyright by TomaszPuscian"),r.a.createElement("p",{className:"footer--paragraph",id:"ndg"},"NDG")))}),m=a(8),d=a(13),f=a(17),h=a(7),p=function(e){var t=e.playlist,a=e.features,n=e.sunnyWeather;if(console.log("vars",n),!a.data||!t.data)return null;return(n?a.data.audio_features.filter((function(e){var t=e.energy,a=e.danceability,n=e.valence;return t>.7&&a>.7&&n>.5})):a.data.audio_features.filter((function(e){var t=e.energy,a=e.danceability,n=e.valence;return t<.7&&a<.7&&n<.5}))).map((function(e){var a=t.data.tracks.items.find((function(t){return t.track.id===e.id}));return Object(f.a)(Object(f.a)({},e),{},{track:a})})).map((function(e){return r.a.createElement(h.a,{variant:"secondary flush",as:"ul"},r.a.createElement(h.a.Item,{key:e.id,as:"li"},e.track.track.album.artists.map((function(e){return e.name})).join(", ")," - ",e.track.track.name))}))},E=function(e){var t=e.sunnyWeather,a=Object(n.useState)(""),c=Object(m.a)(a,2),o=c[0],i=c[1];return Object(n.useEffect)((function(){fetch("https://accounts.spotify.com/api/token?grant_type=client_credentials",{method:"POST",headers:{Authorization:"Basic "+btoa("016e9c15a9094590acbf82803e2d4725:576c77f27dd24fb4ab3946517ec28c25"),"Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){return e.json()})).then((function(e){i(e.access_token)}))}),[]),o?r.a.createElement(r.a.Fragment,null,r.a.createElement(d.c.Provider,{value:o},r.a.createElement(d.a,{id:"37i9dQZF1DX6gb9mP6Vy34"},(function(e){return e.data?r.a.createElement(r.a.Fragment,null,r.a.createElement(d.d,{id:e.data.tracks.items.map((function(e){return e.track.id}))},(function(a){return r.a.createElement(p,{playlist:e,features:a,sunnyWeather:t})}))," "):null})))):null},g=function(e){var t=e.weatherObj;console.log("bbbb",t);var a=t.data.instant.details.air_temperature>15&&t.data.instant.details.cloud_area_fraction<80&&t.data.next_1_hours.details.precipitation_amount<=.05;return r.a.createElement(r.a.Fragment,null,r.a.createElement(E,{sunnyWeather:a}))},b=(a(41),function(e){var t=e.weatherObj;return r.a.createElement("div",{className:"list-group"},r.a.createElement(h.a,null,r.a.createElement(h.a.Item,null,"Temperatura: ",t.data.instant.details.air_temperature," st. C"),r.a.createElement(h.a.Item,null,"Opady: ",t.data.next_1_hours.details.precipitation_amount," mm"),r.a.createElement(h.a.Item,null,"Zachmurzenie: ",t.data.instant.details.cloud_area_fraction," %")))}),y=(a(42),function(e){var t=e.latitude,a=e.longtitude,c=Object(n.useState)(""),o=Object(m.a)(c,2),i=o[0],l=o[1];if(Object(n.useEffect)((function(){fetch("https://api.met.no/weatherapi/locationforecast/2.0/compact?lat=".concat(t,"&lon=").concat(a)).then((function(e){return e.json()})).then((function(e){return l(e.properties)}))}),[]),i){var u=new Date;u.setHours(u.getHours()-1);var s=u.getTime(),d=i.timeseries.find((function(e){return new Date(e.time).getTime()>s}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(b,{weatherObj:d}),r.a.createElement("div",{className:"playlist"},"Playlist for you:"),r.a.createElement(g,{weatherObj:d}))}return r.a.createElement("div",{className:"loading-screen"},"LOADING")}),v=function(){var e=Object(n.useState)(""),t=Object(m.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(""),i=Object(m.a)(o,2),l=i[0],u=i[1],s=function(e){var t=e.coords.latitude,a=e.coords.longitude;c(t),u(a)},d=function(){alert("Cloudify have failed to obtain your location. Let Cloudify get your position or write it in the search field below")};return Object(n.useEffect)((function(){navigator.geolocation.getCurrentPosition(s,d,{maximumAge:0,enableHighAccuracy:!0,timeout:5e3,frequency:5e3})}),[]),a&&l?(console.log(a,l),r.a.createElement(y,{latitude:a,longtitude:l})):null};a(43);var w=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(l,null),r.a.createElement(u,null,r.a.createElement(v,null)),r.a.createElement(s,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[23,1,2]]]);
//# sourceMappingURL=main.f698c32c.chunk.js.map